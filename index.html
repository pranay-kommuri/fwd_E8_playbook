<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>playbook</title>
    <link rel="stylesheet" href="./css/styles.css">
    <script src="https://kit.fontawesome.com/b0f29e9bfe.js" crossorigin="anonymous"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.js" integrity="sha512-9ocft8BVEGO4YnjEW4Tkq0+d3Usuax+GF922LJML/Q5ZLmtu9hgBbUZTxKXAkm+hzIHoC3I+vYha66opI9AuSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    
    <!-------======== Header and Navbar ========------->
    <header>
        <img src="./assets/logowithtext.png" alt="logowithtext" class="logo">
        <button class="btnLogin-popup">Sign in</button>
    </header>
    <nav>
        <ul>
            <li><a href="#" id="clicked">Home</a></li>
            <li><a href="./explore.html">Explore</a></li>
            <li><a href="#">Quiz <ion-icon name="caret-down"></ion-icon></a>
                <ul class="dropdown">
                    <li><a href="./quizeasy.html">Easy</a></li>
                    <li><a href="./quizmedium.html">Medium</a></li>
                    <li><a href="./quizhard.html">Hard</a></li>
                </ul>
            </li>
            <li><a href="https://github.com/pranay-kommuri/fwd_E8_playbook" target="_blank">project</a></li>
            <li><a href="./about.html">About us</a></li>
            <li><a href="./contact.html">Contact</a></li>
        </ul>
        <p class="state">not connected to database</p>
    </nav>


    <div class="wrapper">
        <span class="icon-close"><ion-icon name="close"></ion-icon></span>

        <div class="form-box login">
            <h2>Sign in</h2>
            <form action="/signin" method="POST">
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" name="email" required>
                    <label>Email</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name="password" required>
                    <label>Password</label>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">Remember me</label>
                    <a href="#">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Sign in</button>
                <button type="submit" formaction="/signin-admin" class="btn2">Sign in as admin</button>
                <div class="login-register">
                    <p>Don't have an account? <a href="#" class="register-link">Sign up</a></p>
                </div>
            </form>            
        </div>
        <div class="form-box register">
            <h2>Sign up</h2>
            <form action="/signup" method="POST">
                <div class="input-box">
                    <span class="icon"><ion-icon name="person"></ion-icon></span>
                    <input type="text" name="username" required>
                    <label>Username</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail"></ion-icon></span>
                    <input type="email" name="email" required>
                    <label>Email</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                    <input type="password" name="password" required>
                    <label>Password</label>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">I agree to the terms and conditions</label>
                </div>
                <button type="submit" class="btn">Sign up</button>
                <div class="login-register">
                    <p>Already have an account? <a href="#" class="login-link">Sign in</a></p>
                </div>
            </form>            
        </div>
    </div>


    <div class="main">
        <div class="content">
            <h1>Thrive in the Indian Heat: Your Playbook for Sporting Success!</h1>
            <p>
                Feel the game, ignite your passion. Every moment on the field is an opportunity to push your limits, conquer challenges, and embrace the thrill of victory. Whether you win or lose, the experience fuels your spirit, driving you to strive harder. Let the game elevate you to greatness!
            </p>
        </div>

        <div class="arrows">
            <button id="prev"><ion-icon name="arrow-back-circle"></ion-icon></button>
            <button id="next"><ion-icon name="arrow-forward-circle"></ion-icon></button>
        </div>
        
        <div class="flipbook-container">
            <div id="flipbook">
                <div class="page">Playbook <br><small>~by Team E8</small></div>
                <div class="page">
                    <h1>Kabaddi</h1>
                    <p>
                        Kabaddi is a contact team sport originating in India, where players take turns to raid the opposing team's half, tagging as many defenders as possible while holding their breath and chanting "kabaddi."    
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img1.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Kho Kho</h1>
                    <p>
                        Kho Kho is a traditional Indian tag game played on a rectangular field with two teams of 12 players each, where nine members of the chasing team sit in a row alternately facing opposite directions.
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img2.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Mallakhamb</h1>
                    <p>
                        Mallakhamb is an ancient Indian sport that combines gymnastics and yoga, performed on a vertical wooden pole, rope, or cane. Athletes demonstrate complex poses, strength, and flexibility while balancing   
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img3.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Pehlwani (Traditional Wrestling)</h1>
                    <p>
                        Pehlwani, also known as Kushti, is a traditional form of wrestling in India, performed on a clay or sand-based arena. Wrestlers, called pehlwans, undergo rigorous training and adhere to a strict diet
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img4.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Gilli Danda</h1>
                    <p>
                        Gilli Danda is a rural Indian sport similar to cricket and baseball, played using two wooden sticksâ€”a short stick (gilli) and a longer one (danda). Players strike the gilli with the danda to propel it    
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img5.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Atya Patya</h1>
                    <p>
                        Atya Patya is a traditional Indian tag game involving two teams, played on a rectangular court divided into multiple lanes. Defenders occupy these lanes, while attackers aim to cross all lanes  
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img6.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Astapadham</h1>
                    <p>
                        Astapadham is a traditional Indian board game played on a grid resembling a lotus with eight petals. Players use dice to move their pieces, with the objective of completing a circuit   
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img7.jpg" alt="img1"></div>

                <div class="page">
                    <h1>Andhadhun</h1>
                    <p>
                        Andhadhun, meaning "blind chase," is a recreational activity where a blindfolded player attempts to catch others in a restricted area. Known in various forms across India   
                    </p>
                </div>
                <div class="page"><img src="./assets/exploreimages/img8.jpg" alt="img1"></div>

                <div class="page"></div>
            </div>
        </div>
    </div>
    <section id="s3">
        <h1>Test your knowledge!</h1>
        
        <div class="content3">
            <p>
                Playbookâ€™s interactive quizzes challenge your knowledge while making learning fun and engaging. Test yourself across various topics, receive instant feedback, and track your progress.<br>
                Designed to educate and entertain, these quizzes are perfect for users seeking to explore, improve, and enjoy a dynamic learning experience tailored to their interests.
            </p>
        </div>
        <ul>
            <li><div class="easy"><a href="./quizeasy.html"><img src="./assets/easy.png" alt="Easy">Easy</a></div></li>
            <li><div class="medium"><a href="./quizmedium.html"><img src="./assets/medium.png" alt="Medium">Medium</a></div></li>
            <li><div class="hard"><a href="./quizhard.html"><img src="./assets/hard.png" alt="Hard">Hard</a></div></li>
        </ul>
    </section>
    
    <section id="s2">
        <h1>About this website</h1><br>
        <div class="rt">
            <p>
                Playbook is a platform celebrating Indiaâ€™s traditional sports like Kabaddi, Kho-Kho, and Gilli Danda. We aim to preserve their cultural heritage, inspire new generations, and connect communities. Through engaging stories and resources, Playbook bridges tradition and modernity, keeping the spirit of Indiaâ€™s rich sporting legacy alive.
            </p>
            <img src="./assets/kidsplaying.jpg" alt="">
        </div>
    </section>
    <section>
    </section>
    <div class="end">
        <img src="./assets/contactus.gif" alt="Thank you!">
        <div class="rightp">
            <p>Weâ€™d love to hear from you! If you have any questions, suggestions, or feedback about Playbook, feel free to reach out. Letâ€™s connect to celebrate and preserve the legacy of traditional Indian sports together.<br>
                
                Email: <a id="emailLink" href="#" class="endurl">playbook.desk@gmail.com</a>

                <script>
                    function openGmail() {
                        const recipient = 'playbook.desk@gmail.com';
                        const subject = 'Feedback on playbook!';
                        const body = '\nDear Playbook,\n\nI am a huge fan of the website ðŸ¤©, but . . .';

                    const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=${recipient}&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    
                    window.open(gmailUrl, '_blank');
                    }

                    document.getElementById('emailLink').addEventListener('click', openGmail);

                </script><br>
                Social Media: Follow us on <a href="https://www.facebook.com/profile.php?id=61572171535512" target="_blank" class="endurl">Facebook</a>,
                 <a href="https://x.com/theplaybook_E8" target="_blank" class="endurl">Twitter</a>,
                 and <a href="https://www.instagram.com/playbook.official" target="_blank" class="endurl"> playbook.official</a><br>
                
                More info on the <a href="./contact.html" class="endurl">Contact</a> page!
            </p>
        </div>
    </div>
    <footer>
        <p>
            Thank you for visiting playbook!
        </p>
    </footer>
    
    <script src="./js/jquery.js"></script>
    <script src="./js/turn.js"></script>
    <script src="./js/app.js"></script>
    <script>
        let next = document.getElementById('next');
        let prev = document.getElementById('prev');
        next.onclick = function(){
            $('#flipbook').turn('next');
        }
        prev.onclick = function(){
            $('#flipbook').turn('previous');
        }
        $(document).ready(function () {
            const totalRealPages = 16; // Total real pages in the flipbook

            // Initialize flipbook
            $('#flipbook').turn({
                width: 550,
                height: 360,
                autoCenter: true,
            });

            // Start at a random real page
            const randomPage = Math.floor(Math.random() * totalRealPages) + 1;
            $('#flipbook').turn('page', randomPage + 1); // +1 accounts for the initial placeholder page

            // Circular navigation logic with dynamic page assignment
            $('#flipbook').on('turning', function (event, page) {
                const totalPages = $(this).turn('pages');

                if (page === totalPages) {
                    event.preventDefault();
                    $(this).turn('page', 2);
                    return;
                }

                if (page === 1) {
                    event.preventDefault();
                    $(this).turn('page', totalPages - 1);
                    return;
                }

                // Adjust page labels dynamically
                const currentPage = (page - 1) % totalRealPages || totalRealPages;
                const previousPage = currentPage === 1 ? totalRealPages : currentPage - 1;
                const nextPage = currentPage === totalRealPages ? 1 : currentPage + 1;

                console.log(`Current Page: ${currentPage}, Previous Page: ${previousPage}, Next Page: ${nextPage}`);

                // Optionally, you can update the content dynamically here
                // For example, if the page elements need to display the updated page numbers dynamically
            });
        });
        
        let refreshInterval = setInterval(()=>{
            $('#flipbook').turn('next');
        },8000)
    </script>



    <script>
        window.onload = function () {
          fetch('/check-session', {
            method: 'GET',
          })
            .then(response => response.json())
            .then(data => {
              if (data.loggedIn) {
                document.querySelector('.btnLogin-popup').innerText = 'Sign out';
                document.querySelector('.state').innerText = `You are signed in as ${data.username}`;
                enableLinks();
              } else {
                document.querySelector('.btnLogin-popup').innerText = 'Sign in';
                document.querySelector('.state').innerText = 'You are not signed in';
                disableLinks();
              }
            })
            .catch(err => console.error('Error checking session:', err));
        };
        
        // Function to enable all <a> tags
        function enableLinks() {
          const links = document.querySelectorAll('a');
          links.forEach(link => {
            link.addEventListener('click', () => {
            });
          });
        }
        
        // Function to disable all <a> tags and prompt sign in
        function disableLinks() {
            const links = document.querySelectorAll('a');
            links.forEach(link => {
                if (!link.classList.contains('register-link') && !link.classList.contains('login-link')) {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        showSignInPopup(); 
                    });
                }
            });
        }

        
        function showSignInPopup() {
          alert("Please sign in to access this link.");
        }
        
        document.querySelector('.btnLogin-popup').addEventListener('click', function (e) {
        if (e.target.innerText === 'Sign out') {
            fetch('/signout', {
            method: 'POST',
            })
            .then(response => response.json())
            .then(data => {
                if (data.loggedIn === false) {
                document.querySelector('.btnLogin-popup').innerText = 'Sign in';
                document.querySelector('.state').innerText = 'You are not signed in';
                disableLinks(); // Ensure links are disabled when signed out
                }
            })
            .catch(err => console.error('Error logging out:', err));
        }
        });

        app.get('/debug-admins', async (req, res) => {
            try {
                const admins = await adminsCollection.find({}).toArray();
                res.json(admins);
            } catch (error) {
                console.error("Error fetching admins:", error);
                res.status(500).send({ message: "Error fetching admins" });
            }
            });
      </script>
      
     
</body>
</html>
